{% extends "base-titlebar.html" %}
{% load staticfiles %}

{#{% block head %}#}
{#    {{ block.super }}#}
{#    <link rel="stylesheet" href="{% static 'uikit/css/components/accordion.min.css' %}"/>#}
{#    <link rel="stylesheet" href="{% static 'uikit/css/components/accordion.almost-flat.min.css' %}"/>#}
{#    <link rel="stylesheet" href="{% static 'uikit/css/components/accordion.gradient.min.css' %}"/>#}
{##}
{#    <script src="{% static 'uikit/js/components/accordion.min.js' %}"></script>#}
{#    <script src="{% static 'ckeditor/ckeditor.js' %}"></script>#}
{##}
{#{% endblock %}#}

{% block content %}
    <!--The Contributor Profile Menu Bar-->
    <div>
        {% if contributorProfile.avatar == ""  %}
            <img class="profile_avatar" src="{% static "images/Relevate Logo.png" %}" alt="logo"/>
        {% elif contributorProfile.avatar != "" %}
            <img class="profile_avatar" src="{{ contributorProfile.avatar.url }}">
        {% endif %}

        <div class="uk-container">
            <div class="uk-text-center">
                <h1 class="orange">
                    {{ user.first_name }} {{ user.last_name }}, {{ contributorProfile.degree.degreeName }}
                </h1>
                {% if user.is_contributor %}
                    <h3 class="blue">Approved Relevate Contributor</h3>
                {% endif %}
            </div>
            <form class="uk-form" method="post" enctype='multipart/form-data'
                  action="{% url 'myrelevate:contributor:updateAvatar' %}">
                {% csrf_token %}
                {{ avatarForm }}
                <input class="uk-button" type="submit" value="Update">
            </form>
        </div>

    </div>
    <br><br><br>
    <div class="uk-container">
        <ul class="uk-tab" data-uk-tab data-uk-switcher="{connect:'#profileContent'}">
            <li class="uk-active"><a>Credentials</a></li>
            <li><a href="">Area Of Expertise</a></li>
            <li><a href="">Biography</a></li>
            <li><a href="">Research Area/Clinical Interest</a></li>
            <li><a href="">Contact Information</a></li>
            <li><a href="">Adviser</a></li>
            <li><a href="">CV/Resume</a></li>
        </ul>
    </div>
    <div class="uk-container">
        <!--Displays the contributors profile-->

        <ul id="profileContent" class="uk-switcher">
            <li>
                <br><br>
                <form class="uk-form" method="post" action="{% url 'myrelevate:contributor:updateDegree' %}">
                    {% csrf_token %}
                    <label for="id_degree">Degree Completed:</label>
                    <select id="id_degree" name="degree">
                        <option>Choose Your Degree</option>
                        {% for degree in degrees %}
                            <option {% if contributorProfile.degree_id == degree.id %} selected="selected" {% endif %}
                                value="{{ degree.id }}">
                            {{ degree.degreeName }}
                            </option>
                        {% endfor %}
                    </select>
                    <input class="uk-button" type="submit" value="Update">
                </form>
                <br><br>
                <form class="uk-form" method="post" action="{% url 'myrelevate:contributor:updateProgram' %}">
                    {% csrf_token %}
                    {{ programForm }}
                    <input class="uk-button" type="submit" value="Update">
                </form>
            </li>
            <li>
                <form class="uk-form" method="post" action="{% url 'myrelevate:contributor:updateAreaOfExpertise' %}">
                    {% csrf_token %}
                    <ul id="id_expertise_topics" class="uk-list uk-column-1-2" >
                        {% for topic in topics %}
                            <li>
                                <label>
                                    <input id="id_expertise_topics_{{ topic.id }}"
                                           {% for expertise_topic in contributorProfile.expertise_topics.all %}
                                               {% if expertise_topic.id == topic.id %} checked="checked" {% endif %}
                                           {% endfor %}
                                           name="expertise_topics" type="checkbox" value="{{ topic.id }}">
                                    {{ topic.topicName }}
                                </label>
                                <div class="uk-button-dropdown" data-uk-dropdown="{pos:'bottom-center', mode:'click'}">
                                    <i class="uk-icon-caret-down"></i>
                                    <div class="uk-dropdown-blank uk-panel-box-primary uk-dropdown-bottom">
                                        {{ topic.topicDescription }}
                                    </div>
                                </div>
                            </li>
                        {% endfor %}
                    </ul>
                    <input class="uk-button" type="submit" value="Update">
                </form>
            </li>
            <li>
                <form class="uk-form" method="post" action="{% url 'myrelevate:contributor:updateBiography' %}">
                    {% csrf_token %}
                    {{ biographyForm }}
                    <input class="uk-button" type="submit" value="Update">
                </form>
            </li>
            <li>
                <form class="uk-form" method="post" action="{% url 'myrelevate:contributor:updateInterest' %}">
                    {% csrf_token %}
                    {{ interestForm }}
                    <input class="uk-button" type="submit" value="Update">
                </form>
            </li>
            <li>
                <form class="uk-form" method="post" action="{% url 'myrelevate:contributor:updateContact' %}">
                    {% csrf_token %}
                    <br>{{ contactForm.address }}<br>
                    <br>{{ contactForm.city }}<br>
                    <br>{{ contactForm.state }}<br>
                    <br>{{ contactForm.zipcode }}<br>
                    <br>{{ contactForm.website_url }}<br><br>
                    <input class="uk-button" type="submit" value="Update">
                </form>
            </li>
            <li>
                {{ contributorProfile.adviser_first_name }} {{ contributorProfile.adviser_last_name }}
                    {{ contributorProfile.adviser_email }}
            </li>
            <li>
                <form class="uk-form" method="post" enctype='multipart/form-data'
                      action="{% url 'myrelevate:contributor:updateCVResume' %}">
                    {% csrf_token %}
                    {{ resumeForm }}
                    <input class="uk-button" type="submit" value="Update">
                </form>
                <object data="{{ contributorProfile.cv.url }}" type="application/pdf"
                        width="1100" height="1000"></object>
            </li>
        </ul>
    </div>

{% endblock %}

{% block footer %}
    {{ block.super }}
    <script>
        // Replace the <textarea id="editor1"> with a CKEditor
        // instance, using default configuration.
        CKEDITOR.replace('id_biography');
        CKEDITOR.replace('id_interests');
    </script>
{% endblock %}